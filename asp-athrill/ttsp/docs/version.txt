
	TTSP - TOPPERS Test Suite Package -
	変更履歴

このドキュメントは，TTSPのRelease 1.0.0以降の変更履歴を，新しい方から順
に記述したものである．

----------------------------------------------------------------------
 TTSP
     TOPPERS Test Suite Package

 Copyright (C) 2009-2016 by Center for Embedded Computing Systems
             Graduate School of Information Science, Nagoya Univ., JAPAN
 Copyright (C) 2009-2011 by Digital Craft Inc.
 Copyright (C) 2009-2011 by NEC Communication Systems, Ltd.
 Copyright (C) 2009-2012 by FUJISOFT INCORPORATED

 上記著作権者は，以下の (1)〜(3) の条件を満たす場合に限り，本ドキュメ
 ント（本ドキュメントを改変したものを含む．以下同じ）を使用・複製・改
 変・再配布（以下，利用と呼ぶ）することを無償で許諾する．
 (1) 本ドキュメントを利用する場合には，上記の著作権表示，この利用条件
     および下記の無保証規定が，そのままの形でドキュメント中に含まれて
     いること．
 (2) 本ドキュメントを改変する場合には，ドキュメントを改変した旨の記述
     を，改変後のドキュメント中に含めること．ただし，改変後のドキュメ
     ントが，TOPPERSプロジェクト指定の開発成果物である場合には，この限
     りではない．
 (3) 本ドキュメントの利用により直接的または間接的に生じるいかなる損害
     からも，上記著作権者およびTOPPERSプロジェクトを免責すること．また，
     本ドキュメントのユーザまたはエンドユーザからのいかなる理由に基づ
     く請求からも，上記著作権者およびTOPPERSプロジェクトを免責すること．

 本ドキュメントは，無保証で提供されているものである．上記著作権者およ
 びTOPPERSプロジェクトは，本ドキュメントに関して，特定の使用目的に対す
 る適合性も含めて，いかなる保証も行わない．また，本ドキュメントの利用
 により直接的または間接的に生じたいかなる損害に関しても，その責任を負
 わない．

 $Id: version.txt 29 2016-01-09 06:22:15Z ertl-honda $

----------------------------------------------------------------------

        TTSP
        Release 1.1.2 から 1.1.3 への変更点
        リリース日 2016-01-09

○TTSP変更点のリスト

・char_t を char に変更．

----------------------------------------------------------------------

        TTSP
        Release 1.1.1 から 1.1.2 への変更点
        リリース日 2012-12-10

○TTSP変更点のリスト

・FMPカーネルに以下のターゲット依存部を追加
  ・vexpressa9_gcc
  ・zynq_gcc

○TTG変更点のリスト

・Ruby1.9.3で動作するように対応(TTG 3.0.7)

----------------------------------------------------------------------

        TTSP
        Release 1.0.0 から 1.1.1 への変更点
        リリース日 2012-05-31


○TTSP変更点のリスト

・FMPカーネルに以下のターゲット依存部を追加
  ・at91skyeye_armcc
  ・naviengine_armcc

----------------------------------------------------------------------

        TTSP
        Release 1.0.0 から 1.1.0 への変更点
        リリース日 2012-05-09


○ユーザの要修正箇所

・configure.sh
  ・パラメータに変更があるため，最新版へ更新し，再度ターゲットに
    合わせて設定が必要．

・ttsp_target.sh
  ・パラメータに変更があるため，最新版へ更新し，再度ターゲットに
    合わせて設定が必要．

・configure.yaml
  ・パラメータに変更があるため，最新版へ更新し，再度ターゲットに
    合わせて設定が必要．

・ttsp_target_test.c
  ・CPU例外の先頭で実行するフック関数(ttsp_cpuexc_hook)の実装．
    (不要であれば空関数を用意する)

・ttsp_target_test.h
  ・インクルードガード用マクロをTTSP用に統一．
  ・CPU例外の先頭で実行するフック関数(ttsp_cpuexc_hook)の宣言．
  ・TTSP_INVALID_ADDRESSを廃止し，以下のマクロを追加．
    ・関数の先頭番地として不正なアドレス
      TTSP_INVALID_FUNC_ADDRESS
    ・スタック領域として不正なアドレス
      TTSP_INVALID_STK_ADDRESS
    ・固定長メモリープールの先頭番地として不正なアドレス
      TTSP_INVALID_MPF_ADDRESS
  ・TTSP_INVALID_SIZEを廃止し，「スタックサイズとして不正なサイズ」として
    TTSP_INVALID_STACK_SIZEを追加．

○TTSP変更点のリスト

・FMPカーネルに対応

・SILテストの追加

・TTBの仕様変更
  ・ATT_ISRがE_RSATRを返すテスト(ATT_ISR_F-b)は，ローカルIRCでのみ実施
    可能であるため，ターゲットによって取捨選択するように変更．

・APIテストの修正
  ・先頭の処理でテストライブラリ用変数初期化関数
    (ttsp_initialize_test_lib)を実行する処理を追加．
  ・CPU例外の先頭でフック関数(ttsp_cpuexc_hook)を呼び出す処理を追加．
  ・固定としていたスタックサイズを，ターゲット依存部で設定するスタック
    サイズマクロを使用するように修正．
  ・不正なアドレスとして一律TTSP_INVALID_ADDRESSを使用していたが，ター
    ゲットによって使い分けが必要となるため，以下のマクロへ変更．
    ・関数の先頭番地として不正なアドレス
      TTSP_INVALID_FUNC_ADDRESS
    ・スタック領域として不正なアドレス
      TTSP_INVALID_STK_ADDRESS
    ・固定長メモリープールの先頭番地として不正なアドレス
      TTSP_INVALID_MPF_ADDRESS
  ・ATT_ISRはターゲットによって割付け可能プロセッサが制限されることがあ
    るため，使用するクラスを変更．ATT_ISRのスクラッチテストをすべて修正．
  ・指定した割込み番号の上位ビットが，API発行元のプロセッサIDと一致して
    いないエラーを検出するテストケースにおいて，他プロセッサ用割込み番
    号を指定していたが，ターゲットによって意図したエラーとならないこと
    があるため，明確に上位ビットが発行元と異なる割込み番号のマクロを用
    意．これに合わせて以下のTESRYデータを修正．
    dis_int_F-b-2.yaml，dis_int_F-c.yaml，ena_int_F-b-2.yaml，ena_int_F-c.yaml
  ・メインタスクの先頭でsyslog_msk_logを実行しないように変更．
  ・テストの開始と終了のログメッセージをTTGと統一．
  ・"TOPPERS_MACRO_ONRY"というtypoのマクロを削除．
  ・TTSP_INVALID_SIZEをTTSP_INVALID_STACK_SIZEへ変更．
  ・TTSP_TASK_STACK_SIZEとTTSP_NON_TASK_STACK_SIZEが異なっている場合に
    発生する問題を修正．

・SILテストの修正
  ・先頭の処理でテストライブラリ用変数初期化関数
    (ttsp_initialize_test_lib)を実行する処理を追加．
  ・CPU例外の先頭でフック関数(ttsp_cpuexc_hook)を呼び出す処理を追加．
  ・固定としていたスタックサイズを，ターゲット依存部で設定するスタック
    サイズマクロを使用するように修正．
  ・正常に終了していないにも関わらず，正常終了のメッセージが出力される
    不具合を修正．
  ・メインタスクの先頭でsyslog_msk_logを実行しないように変更．
  ・不要な"TOPPERS_MACRO_ONLY"マクロを削除．

・ターゲット依存APIテストプログラムの修正
  ・先頭の処理でテストライブラリ用変数初期化関数
    (ttsp_initialize_test_lib)を実行する処理を追加．
  ・固定としていたスタックサイズを，ターゲット依存部で設定するスタック
    サイズマクロを使用するように修正．
  ・メインタスクの先頭でsyslog_msk_logを実行しないように変更．
  ・"TOPPERS_MACRO_ONRY"というtypoのマクロを削除．

・テストライブラリの修正
 ・テストライブラリ用変数初期化関数(ttsp_initialize_test_lib)を追加．

・代替APIの修正
  ・タスクコンテキスト，非タスクコンテキストに関わらず，タスクコンテキ
    スト用の内部関数を呼んでいた不具合を修正．

・developer.txtの修正
  ・最新のポリシーに追従していない記述を修正．


○TTG変更点のリスト

・仕様変更(TTG 3.0.6)
  ・スピンロック取得待ちを確認するためのループ回数カウンタに使用する
    変数のデータ型を，uint_t型からulong_t型へ変更．
  ・"TOPPERS_MACRO_ONRY"というtypoのマクロ出力を廃止．
  ・TTGを実行するコンソールの横幅が極端に小さい場合にエラーメッセージを
    出力する機能を追加．

・仕様変更(TTG 3.0.5)
  ・CPU例外の先頭でフック関数(ttsp_cpuexc_hook)を呼び出す処理を追加．
  ・設定ファイルでスタックサイズを変更できるようにするオプションを削除．
    (ターゲット依存部で設定するスタックサイズマクロを使用する)

・仕様変更(TTG 3.0.4)
  ・configure.yamlのenable_clear_int_reqを廃止し，一律割込み要求の明示
    的なクリアを実行するように仕様変更．
    (スクラッチで作成するテストプログラムでは一律クリアを行うため)
  ・テストケース毎に開始時だけでなく終了時にもログを出力するように仕様
    変更．具体的には以下の例の通り．
    例) ASP_staticAPI_DEF_INH_W_a: Start
          ：(チェックポイントログ)
        ASP_staticAPI_DEF_INH_W_a: OK
  ・テストの途中でエラーが発生した場合は，終了ルーチンを実行しないよう
    にチェック処理を入れるように仕様変更．
  ・先頭の処理でテストライブラリ用変数初期化関数
    (ttsp_initialize_test_lib)を実行する処理を追加．
  ・メインタスクの先頭でsyslog_msk_logを実行しないように変更．

・不具合修正(TTG 3.0.3)
  ・ISRのTA_ENAINT属性を確認する処理において，enable_clear_int_reqが
    trueの場合に，引数の割込み番号が不正となる不具合を修正．

・不具合修正(TTG 3.0.2)
  ・不足していたエラーコードを追加．

・不具合修正(TTG 3.0.1)
  ・1ファイルに複数のテストケースを記述して，途中にバリエーション判定で
    対象外となるテストケースが存在する場合，そこで処理が終わってしまう
    不具合を修正．
  ・過渡状態かつ初期優先度と現在優先度が異なるタスクが前状態に存在する
    場合に，意図しない箇所で優先度変更処理を実行する不具合を修正．


----------------------------------------------------------------------

        TTSP
        Release 1.0.0
        リリース日 2011-05-19

----------------------------------------------------------------------
